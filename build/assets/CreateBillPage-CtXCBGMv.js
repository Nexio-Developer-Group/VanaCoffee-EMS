import{Q as T,r as se,K as _r,j as f}from"./index-BJ57Odm-.js";import{I as Ft,S as Ot,a as Rt,b as It,c as Dt,d as Be}from"./select-0RswQJyk.js";import{B as et}from"./Button-7Tz0rUHs.js";import{C as tt,b as st,c as rt,a as at,B as vr}from"./badge-BTqoboKl.js";import{S as ms}from"./separator-DgL7yTqQ.js";import{s as xr,c as br}from"./BillService-Cvv_QPqa.js";import{g as kr}from"./ItemService-BDk4lKjN.js";import{P as ys}from"./phone-DzGBt4oy.js";import{c as De}from"./createLucideIcon-BJHE781N.js";import"https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";import"./isNil-Cy_hEUtT.js";import"./index-DbyFNifg.js";import"./utils-fzJQ3yUy.js";import"./classNames-6HTn5c6X.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Ar=De("banknote",wr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Cr=De("credit-card",Sr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Vr=De("dollar-sign",Nr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Tr=De("ellipsis",jr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M5 12h14",key:"1ays0h"}]],Fr=De("minus",Er);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Rr=De("percent",Or);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dr=De("plus",Ir);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Zr=De("smartphone",Mr);var ut=s=>s.type==="checkbox",Pe=s=>s instanceof Date,he=s=>s==null;const Hs=s=>typeof s=="object";var ae=s=>!he(s)&&!Array.isArray(s)&&Hs(s)&&!Pe(s),Js=s=>ae(s)&&s.target?ut(s.target)?s.target.checked:s.target.value:s,Pr=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,Ys=(s,e)=>s.has(Pr(e)),Lr=s=>{const e=s.constructor&&s.constructor.prototype;return ae(e)&&e.hasOwnProperty("isPrototypeOf")},rs=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Q(s){let e;const t=Array.isArray(s),r=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)e=new Date(s);else if(!(rs&&(s instanceof Blob||r))&&(t||ae(s)))if(e=t?[]:{},!t&&!Lr(s))e=s;else for(const a in s)s.hasOwnProperty(a)&&(e[a]=Q(s[a]));else return s;return e}var St=s=>/^\w*$/.test(s),G=s=>s===void 0,Ct=s=>Array.isArray(s)?s.filter(Boolean):[],as=s=>Ct(s.replace(/["|']|\]/g,"").split(/\.|\[/)),g=(s,e,t)=>{if(!e||!ae(s))return t;const r=(St(e)?[e]:as(e)).reduce((a,n)=>he(a)?a:a[n],s);return G(r)||r===s?G(s[e])?t:s[e]:r},ge=s=>typeof s=="boolean",B=(s,e,t)=>{let r=-1;const a=St(e)?[e]:as(e),n=a.length,i=n-1;for(;++r<n;){const c=a[r];let u=t;if(r!==i){const h=s[c];u=ae(h)||Array.isArray(h)?h:isNaN(+a[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;s[c]=u,s=s[c]}};const gt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ve={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qs=T.createContext(null);Qs.displayName="HookFormContext";const Nt=()=>T.useContext(Qs);var Gs=(s,e,t,r=!0)=>{const a={defaultValues:e._defaultValues};for(const n in s)Object.defineProperty(a,n,{get:()=>{const i=n;return e._proxyFormState[i]!==ve.all&&(e._proxyFormState[i]=!r||ve.all),t&&(t[i]=!0),s[i]}});return a};const Vt=typeof window<"u"?se.useLayoutEffect:se.useEffect;function $r(s){const e=Nt(),{control:t=e.control,disabled:r,name:a,exact:n}=s||{},[i,c]=T.useState(t._formState),u=T.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Vt(()=>t._subscribe({name:a,formState:u.current,exact:n,callback:h=>{!r&&c({...t._formState,...h})}}),[a,r,n]),T.useEffect(()=>{u.current.isValid&&t._setValid(!0)},[t]),T.useMemo(()=>Gs(i,t,u.current,!1),[i,t])}var ke=s=>typeof s=="string",Ks=(s,e,t,r,a)=>ke(s)?(r&&e.watch.add(s),g(t,s,a)):Array.isArray(s)?s.map(n=>(r&&e.watch.add(n),g(t,n))):(r&&(e.watchAll=!0),t);function ot(s){const e=Nt(),{control:t=e.control,name:r,defaultValue:a,disabled:n,exact:i}=s||{},c=T.useRef(a),[u,h]=T.useState(t._getWatch(r,c.current));return Vt(()=>t._subscribe({name:r,formState:{values:!0},exact:i,callback:_=>!n&&h(Ks(r,t._names,_.values||t._formValues,!1,c.current))}),[r,t,n,i]),T.useEffect(()=>t._removeUnmounted()),u}function Ur(s){const e=Nt(),{name:t,disabled:r,control:a=e.control,shouldUnregister:n}=s,i=Ys(a._names.array,t),c=ot({control:a,name:t,defaultValue:g(a._formValues,t,g(a._defaultValues,t,s.defaultValue)),exact:!0}),u=$r({control:a,name:t,exact:!0}),h=T.useRef(s),_=T.useRef(a.register(t,{...s.rules,value:c,...ge(s.disabled)?{disabled:s.disabled}:{}})),I=T.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!g(u.errors,t)},isDirty:{enumerable:!0,get:()=>!!g(u.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!g(u.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!g(u.validatingFields,t)},error:{enumerable:!0,get:()=>g(u.errors,t)}}),[u,t]),A=T.useCallback(H=>_.current.onChange({target:{value:Js(H),name:t},type:gt.CHANGE}),[t]),$=T.useCallback(()=>_.current.onBlur({target:{value:g(a._formValues,t),name:t},type:gt.BLUR}),[t,a._formValues]),ce=T.useCallback(H=>{const ye=g(a._fields,t);ye&&H&&(ye._f.ref={focus:()=>H.focus&&H.focus(),select:()=>H.select&&H.select(),setCustomValidity:V=>H.setCustomValidity(V),reportValidity:()=>H.reportValidity()})},[a._fields,t]),Z=T.useMemo(()=>({name:t,value:c,...ge(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:A,onBlur:$,ref:ce}),[t,r,u.disabled,A,$,ce,c]);return T.useEffect(()=>{const H=a._options.shouldUnregister||n;a.register(t,{...h.current.rules,...ge(h.current.disabled)?{disabled:h.current.disabled}:{}});const ye=(V,le)=>{const ee=g(a._fields,V);ee&&ee._f&&(ee._f.mount=le)};if(ye(t,!0),H){const V=Q(g(a._options.defaultValues,t));B(a._defaultValues,t,V),G(g(a._formValues,t))&&B(a._formValues,t,V)}return!i&&a.register(t),()=>{(i?H&&!a._state.action:H)?a.unregister(t):ye(t,!1)}},[t,a,i,n]),T.useEffect(()=>{a._setDisabledField({disabled:r,name:t})},[r,t,a]),T.useMemo(()=>({field:Z,formState:u,fieldState:I}),[Z,u,I])}const mt=s=>s.render(Ur(s));var Xs=(s,e,t,r,a)=>e?{...t[s],types:{...t[s]&&t[s].types?t[s].types:{},[r]:a||!0}}:{},me=s=>Array.isArray(s)?s:[s],gs=()=>{let s=[];return{get observers(){return s},next:a=>{for(const n of s)n.next&&n.next(a)},subscribe:a=>(s.push(a),{unsubscribe:()=>{s=s.filter(n=>n!==a)}}),unsubscribe:()=>{s=[]}}},Yt=s=>he(s)||!Hs(s);function Ee(s,e,t=new WeakSet){if(Yt(s)||Yt(e))return s===e;if(Pe(s)&&Pe(e))return s.getTime()===e.getTime();const r=Object.keys(s),a=Object.keys(e);if(r.length!==a.length)return!1;if(t.has(s)||t.has(e))return!0;t.add(s),t.add(e);for(const n of r){const i=s[n];if(!a.includes(n))return!1;if(n!=="ref"){const c=e[n];if(Pe(i)&&Pe(c)||ae(i)&&ae(c)||Array.isArray(i)&&Array.isArray(c)?!Ee(i,c,t):i!==c)return!1}}return!0}var fe=s=>ae(s)&&!Object.keys(s).length,ns=s=>s.type==="file",be=s=>typeof s=="function",pt=s=>{if(!rs)return!1;const e=s?s.ownerDocument:0;return s instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},er=s=>s.type==="select-multiple",is=s=>s.type==="radio",Br=s=>is(s)||ut(s),Mt=s=>pt(s)&&s.isConnected;function zr(s,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)s=G(s)?r++:s[e[r++]];return s}function qr(s){for(const e in s)if(s.hasOwnProperty(e)&&!G(s[e]))return!1;return!0}function re(s,e){const t=Array.isArray(e)?e:St(e)?[e]:as(e),r=t.length===1?s:zr(s,t),a=t.length-1,n=t[a];return r&&delete r[n],a!==0&&(ae(r)&&fe(r)||Array.isArray(r)&&qr(r))&&re(s,t.slice(0,-1)),s}var tr=s=>{for(const e in s)if(be(s[e]))return!0;return!1};function _t(s,e={}){const t=Array.isArray(s);if(ae(s)||t)for(const r in s)Array.isArray(s[r])||ae(s[r])&&!tr(s[r])?(e[r]=Array.isArray(s[r])?[]:{},_t(s[r],e[r])):he(s[r])||(e[r]=!0);return e}function sr(s,e,t){const r=Array.isArray(s);if(ae(s)||r)for(const a in s)Array.isArray(s[a])||ae(s[a])&&!tr(s[a])?G(e)||Yt(t[a])?t[a]=Array.isArray(s[a])?_t(s[a],[]):{..._t(s[a])}:sr(s[a],he(e)?{}:e[a],t[a]):t[a]=!Ee(s[a],e[a]);return t}var nt=(s,e)=>sr(s,e,_t(e));const ps={value:!1,isValid:!1},_s={value:!0,isValid:!0};var rr=s=>{if(Array.isArray(s)){if(s.length>1){const e=s.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!G(s[0].attributes.value)?G(s[0].value)||s[0].value===""?_s:{value:s[0].value,isValid:!0}:_s:ps}return ps},ar=(s,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>G(s)?s:e?s===""?NaN:s&&+s:t&&ke(s)?new Date(s):r?r(s):s;const vs={isValid:!1,value:null};var nr=s=>Array.isArray(s)?s.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,vs):vs;function xs(s){const e=s.ref;return ns(e)?e.files:is(e)?nr(s.refs).value:er(e)?[...e.selectedOptions].map(({value:t})=>t):ut(e)?rr(s.refs).value:ar(G(e.value)?s.ref.value:e.value,s)}var Wr=(s,e,t,r)=>{const a={};for(const n of s){const i=g(e,n);i&&B(a,n,i._f)}return{criteriaMode:t,names:[...s],fields:a,shouldUseNativeValidation:r}},vt=s=>s instanceof RegExp,it=s=>G(s)?s:vt(s)?s.source:ae(s)?vt(s.value)?s.value.source:s.value:s,We=s=>({isOnSubmit:!s||s===ve.onSubmit,isOnBlur:s===ve.onBlur,isOnChange:s===ve.onChange,isOnAll:s===ve.all,isOnTouch:s===ve.onTouched});const bs="AsyncFunction";var Hr=s=>!!s&&!!s.validate&&!!(be(s.validate)&&s.validate.constructor.name===bs||ae(s.validate)&&Object.values(s.validate).find(e=>e.constructor.name===bs)),Jr=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),Qt=(s,e,t)=>!t&&(e.watchAll||e.watch.has(s)||[...e.watch].some(r=>s.startsWith(r)&&/^\.\w+/.test(s.slice(r.length))));const He=(s,e,t,r)=>{for(const a of t||Object.keys(s)){const n=g(s,a);if(n){const{_f:i,...c}=n;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],a)&&!r)return!0;if(i.ref&&e(i.ref,i.name)&&!r)return!0;if(He(c,e))break}else if(ae(c)&&He(c,e))break}}};function ks(s,e,t){const r=g(s,t);if(r||St(t))return{error:r,name:t};const a=t.split(".");for(;a.length;){const n=a.join("."),i=g(e,n),c=g(s,n);if(i&&!Array.isArray(i)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};if(c&&c.root&&c.root.type)return{name:`${n}.root`,error:c.root};a.pop()}return{name:t}}var Yr=(s,e,t,r)=>{t(s);const{name:a,...n}=s;return fe(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(i=>e[i]===(!r||ve.all))},Qr=(s,e,t)=>!s||!e||s===e||me(s).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),Gr=(s,e,t,r,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||s):(t?r.isOnBlur:a.isOnBlur)?!s:(t?r.isOnChange:a.isOnChange)?s:!0,Kr=(s,e)=>!Ct(g(s,e)).length&&re(s,e),ir=(s,e,t)=>{const r=me(g(s,t));return B(r,"root",e[t]),B(s,t,r),s},yt=s=>ke(s);function ws(s,e,t="validate"){if(yt(s)||Array.isArray(s)&&s.every(yt)||ge(s)&&!s)return{type:t,message:yt(s)?s:"",ref:e}}var ze=s=>ae(s)&&!vt(s)?s:{value:s,message:""},Gt=async(s,e,t,r,a,n)=>{const{ref:i,refs:c,required:u,maxLength:h,minLength:_,min:I,max:A,pattern:$,validate:ce,name:Z,valueAsNumber:H,mount:ye}=s._f,V=g(t,Z);if(!ye||e.has(Z))return{};const le=c?c[0]:i,ee=M=>{a&&le.reportValidity&&(le.setCustomValidity(ge(M)?"":M||""),le.reportValidity())},J={},N=is(i),w=ut(i),O=N||w,R=(H||ns(i))&&G(i.value)&&G(V)||pt(i)&&i.value===""||V===""||Array.isArray(V)&&!V.length,de=Xs.bind(null,Z,r,J),oe=(M,U,z,K=Se.maxLength,ie=Se.minLength)=>{const ue=M?U:z;J[Z]={type:M?K:ie,message:ue,ref:i,...de(M?K:ie,ue)}};if(n?!Array.isArray(V)||!V.length:u&&(!O&&(R||he(V))||ge(V)&&!V||w&&!rr(c).isValid||N&&!nr(c).isValid)){const{value:M,message:U}=yt(u)?{value:!!u,message:u}:ze(u);if(M&&(J[Z]={type:Se.required,message:U,ref:le,...de(Se.required,U)},!r))return ee(U),J}if(!R&&(!he(I)||!he(A))){let M,U;const z=ze(A),K=ze(I);if(!he(V)&&!isNaN(V)){const ie=i.valueAsNumber||V&&+V;he(z.value)||(M=ie>z.value),he(K.value)||(U=ie<K.value)}else{const ie=i.valueAsDate||new Date(V),ue=$e=>new Date(new Date().toDateString()+" "+$e),Me=i.type=="time",Ne=i.type=="week";ke(z.value)&&V&&(M=Me?ue(V)>ue(z.value):Ne?V>z.value:ie>new Date(z.value)),ke(K.value)&&V&&(U=Me?ue(V)<ue(K.value):Ne?V<K.value:ie<new Date(K.value))}if((M||U)&&(oe(!!M,z.message,K.message,Se.max,Se.min),!r))return ee(J[Z].message),J}if((h||_)&&!R&&(ke(V)||n&&Array.isArray(V))){const M=ze(h),U=ze(_),z=!he(M.value)&&V.length>+M.value,K=!he(U.value)&&V.length<+U.value;if((z||K)&&(oe(z,M.message,U.message),!r))return ee(J[Z].message),J}if($&&!R&&ke(V)){const{value:M,message:U}=ze($);if(vt(M)&&!V.match(M)&&(J[Z]={type:Se.pattern,message:U,ref:i,...de(Se.pattern,U)},!r))return ee(U),J}if(ce){if(be(ce)){const M=await ce(V,t),U=ws(M,le);if(U&&(J[Z]={...U,...de(Se.validate,U.message)},!r))return ee(U.message),J}else if(ae(ce)){let M={};for(const U in ce){if(!fe(M)&&!r)break;const z=ws(await ce[U](V,t),le,U);z&&(M={...z,...de(U,z.message)},ee(z.message),r&&(J[Z]=M))}if(!fe(M)&&(J[Z]={ref:le,...M},!r))return J}}return ee(!0),J};const Xr={mode:ve.onSubmit,reValidateMode:ve.onChange,shouldFocusError:!0};function ea(s={}){let e={...Xr,...s},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:be(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},a=ae(e.defaultValues)||ae(e.values)?Q(e.defaultValues||e.values)||{}:{},n=e.shouldUnregister?{}:Q(a),i={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let I={..._};const A={array:gs(),state:gs()},$=e.criteriaMode===ve.all,ce=o=>l=>{clearTimeout(h),h=setTimeout(o,l)},Z=async o=>{if(!e.disabled&&(_.isValid||I.isValid||o)){const l=e.resolver?fe((await w()).errors):await R(r,!0);l!==t.isValid&&A.state.next({isValid:l})}},H=(o,l)=>{!e.disabled&&(_.isValidating||_.validatingFields||I.isValidating||I.validatingFields)&&((o||Array.from(c.mount)).forEach(d=>{d&&(l?B(t.validatingFields,d,l):re(t.validatingFields,d))}),A.state.next({validatingFields:t.validatingFields,isValidating:!fe(t.validatingFields)}))},ye=(o,l=[],d,x,p=!0,y=!0)=>{if(x&&d&&!e.disabled){if(i.action=!0,y&&Array.isArray(g(r,o))){const C=d(g(r,o),x.argA,x.argB);p&&B(r,o,C)}if(y&&Array.isArray(g(t.errors,o))){const C=d(g(t.errors,o),x.argA,x.argB);p&&B(t.errors,o,C),Kr(t.errors,o)}if((_.touchedFields||I.touchedFields)&&y&&Array.isArray(g(t.touchedFields,o))){const C=d(g(t.touchedFields,o),x.argA,x.argB);p&&B(t.touchedFields,o,C)}(_.dirtyFields||I.dirtyFields)&&(t.dirtyFields=nt(a,n)),A.state.next({name:o,isDirty:oe(o,l),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else B(n,o,l)},V=(o,l)=>{B(t.errors,o,l),A.state.next({errors:t.errors})},le=o=>{t.errors=o,A.state.next({errors:t.errors,isValid:!1})},ee=(o,l,d,x)=>{const p=g(r,o);if(p){const y=g(n,o,G(d)?g(a,o):d);G(y)||x&&x.defaultChecked||l?B(n,o,l?y:xs(p._f)):z(o,y),i.mount&&Z()}},J=(o,l,d,x,p)=>{let y=!1,C=!1;const q={name:o};if(!e.disabled){if(!d||x){(_.isDirty||I.isDirty)&&(C=t.isDirty,t.isDirty=q.isDirty=oe(),y=C!==q.isDirty);const Y=Ee(g(a,o),l);C=!!g(t.dirtyFields,o),Y?re(t.dirtyFields,o):B(t.dirtyFields,o,!0),q.dirtyFields=t.dirtyFields,y=y||(_.dirtyFields||I.dirtyFields)&&C!==!Y}if(d){const Y=g(t.touchedFields,o);Y||(B(t.touchedFields,o,d),q.touchedFields=t.touchedFields,y=y||(_.touchedFields||I.touchedFields)&&Y!==d)}y&&p&&A.state.next(q)}return y?q:{}},N=(o,l,d,x)=>{const p=g(t.errors,o),y=(_.isValid||I.isValid)&&ge(l)&&t.isValid!==l;if(e.delayError&&d?(u=ce(()=>V(o,d)),u(e.delayError)):(clearTimeout(h),u=null,d?B(t.errors,o,d):re(t.errors,o)),(d?!Ee(p,d):p)||!fe(x)||y){const C={...x,...y&&ge(l)?{isValid:l}:{},errors:t.errors,name:o};t={...t,...C},A.state.next(C)}},w=async o=>{H(o,!0);const l=await e.resolver(n,e.context,Wr(o||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return H(o),l},O=async o=>{const{errors:l}=await w(o);if(o)for(const d of o){const x=g(l,d);x?B(t.errors,d,x):re(t.errors,d)}else t.errors=l;return l},R=async(o,l,d={valid:!0})=>{for(const x in o){const p=o[x];if(p){const{_f:y,...C}=p;if(y){const q=c.array.has(y.name),Y=p._f&&Hr(p._f);Y&&_.validatingFields&&H([x],!0);const _e=await Gt(p,c.disabled,n,$,e.shouldUseNativeValidation&&!l,q);if(Y&&_.validatingFields&&H([x]),_e[y.name]&&(d.valid=!1,l))break;!l&&(g(_e,y.name)?q?ir(t.errors,_e,y.name):B(t.errors,y.name,_e[y.name]):re(t.errors,y.name))}!fe(C)&&await R(C,l,d)}}return d.valid},de=()=>{for(const o of c.unMount){const l=g(r,o);l&&(l._f.refs?l._f.refs.every(d=>!Mt(d)):!Mt(l._f.ref))&&X(o)}c.unMount=new Set},oe=(o,l)=>!e.disabled&&(o&&l&&B(n,o,l),!Ee($e(),a)),M=(o,l,d)=>Ks(o,c,{...i.mount?n:G(l)?a:ke(o)?{[o]:l}:l},d,l),U=o=>Ct(g(i.mount?n:a,o,e.shouldUnregister?g(a,o,[]):[])),z=(o,l,d={})=>{const x=g(r,o);let p=l;if(x){const y=x._f;y&&(!y.disabled&&B(n,o,ar(l,y)),p=pt(y.ref)&&he(l)?"":l,er(y.ref)?[...y.ref.options].forEach(C=>C.selected=p.includes(C.value)):y.refs?ut(y.ref)?y.refs.forEach(C=>{(!C.defaultChecked||!C.disabled)&&(Array.isArray(p)?C.checked=!!p.find(q=>q===C.value):C.checked=p===C.value||!!p)}):y.refs.forEach(C=>C.checked=C.value===p):ns(y.ref)?y.ref.value="":(y.ref.value=p,y.ref.type||A.state.next({name:o,values:Q(n)})))}(d.shouldDirty||d.shouldTouch)&&J(o,p,d.shouldTouch,d.shouldDirty,!0),d.shouldValidate&&Ne(o)},K=(o,l,d)=>{for(const x in l){if(!l.hasOwnProperty(x))return;const p=l[x],y=o+"."+x,C=g(r,y);(c.array.has(o)||ae(p)||C&&!C._f)&&!Pe(p)?K(y,p,d):z(y,p,d)}},ie=(o,l,d={})=>{const x=g(r,o),p=c.array.has(o),y=Q(l);B(n,o,y),p?(A.array.next({name:o,values:Q(n)}),(_.isDirty||_.dirtyFields||I.isDirty||I.dirtyFields)&&d.shouldDirty&&A.state.next({name:o,dirtyFields:nt(a,n),isDirty:oe(o,y)})):x&&!x._f&&!he(y)?K(o,y,d):z(o,y,d),Qt(o,c)&&A.state.next({...t}),A.state.next({name:i.mount?o:void 0,values:Q(n)})},ue=async o=>{i.mount=!0;const l=o.target;let d=l.name,x=!0;const p=g(r,d),y=Y=>{x=Number.isNaN(Y)||Pe(Y)&&isNaN(Y.getTime())||Ee(Y,g(n,d,Y))},C=We(e.mode),q=We(e.reValidateMode);if(p){let Y,_e;const ht=l.type?xs(p._f):Js(o),Ve=o.type===gt.BLUR||o.type===gt.FOCUS_OUT,yr=!Jr(p._f)&&!e.resolver&&!g(t.errors,d)&&!p._f.deps||Gr(Ve,g(t.touchedFields,d),t.isSubmitted,q,C),Tt=Qt(d,c,Ve);B(n,d,ht),Ve?(p._f.onBlur&&p._f.onBlur(o),u&&u(0)):p._f.onChange&&p._f.onChange(o);const Et=J(d,ht,Ve),gr=!fe(Et)||Tt;if(!Ve&&A.state.next({name:d,type:o.type,values:Q(n)}),yr)return(_.isValid||I.isValid)&&(e.mode==="onBlur"?Ve&&Z():Ve||Z()),gr&&A.state.next({name:d,...Tt?{}:Et});if(!Ve&&Tt&&A.state.next({...t}),e.resolver){const{errors:fs}=await w([d]);if(y(ht),x){const pr=ks(t.errors,r,d),hs=ks(fs,r,pr.name||d);Y=hs.error,d=hs.name,_e=fe(fs)}}else H([d],!0),Y=(await Gt(p,c.disabled,n,$,e.shouldUseNativeValidation))[d],H([d]),y(ht),x&&(Y?_e=!1:(_.isValid||I.isValid)&&(_e=await R(r,!0)));x&&(p._f.deps&&Ne(p._f.deps),N(d,_e,Y,Et))}},Me=(o,l)=>{if(g(t.errors,l)&&o.focus)return o.focus(),1},Ne=async(o,l={})=>{let d,x;const p=me(o);if(e.resolver){const y=await O(G(o)?o:p);d=fe(y),x=o?!p.some(C=>g(y,C)):d}else o?(x=(await Promise.all(p.map(async y=>{const C=g(r,y);return await R(C&&C._f?{[y]:C}:C)}))).every(Boolean),!(!x&&!t.isValid)&&Z()):x=d=await R(r);return A.state.next({...!ke(o)||(_.isValid||I.isValid)&&d!==t.isValid?{}:{name:o},...e.resolver||!o?{isValid:d}:{},errors:t.errors}),l.shouldFocus&&!x&&He(r,Me,o?p:c.mount),x},$e=o=>{const l={...i.mount?n:a};return G(o)?l:ke(o)?g(l,o):o.map(d=>g(l,d))},ft=(o,l)=>({invalid:!!g((l||t).errors,o),isDirty:!!g((l||t).dirtyFields,o),error:g((l||t).errors,o),isValidating:!!g(t.validatingFields,o),isTouched:!!g((l||t).touchedFields,o)}),Ue=o=>{o&&me(o).forEach(l=>re(t.errors,l)),A.state.next({errors:o?t.errors:{}})},Xe=(o,l,d)=>{const x=(g(r,o,{_f:{}})._f||{}).ref,p=g(t.errors,o)||{},{ref:y,message:C,type:q,...Y}=p;B(t.errors,o,{...Y,...l,ref:x}),A.state.next({name:o,errors:t.errors,isValid:!1}),d&&d.shouldFocus&&x&&x.focus&&x.focus()},j=(o,l)=>be(o)?A.state.subscribe({next:d=>o(M(void 0,l),d)}):M(o,l,!0),S=o=>A.state.subscribe({next:l=>{Qr(o.name,l.name,o.exact)&&Yr(l,o.formState||_,mr,o.reRenderRoot)&&o.callback({values:{...n},...t,...l})}}).unsubscribe,W=o=>(i.mount=!0,I={...I,...o.formState},S({...o,formState:I})),X=(o,l={})=>{for(const d of o?me(o):c.mount)c.mount.delete(d),c.array.delete(d),l.keepValue||(re(r,d),re(n,d)),!l.keepError&&re(t.errors,d),!l.keepDirty&&re(t.dirtyFields,d),!l.keepTouched&&re(t.touchedFields,d),!l.keepIsValidating&&re(t.validatingFields,d),!e.shouldUnregister&&!l.keepDefaultValue&&re(a,d);A.state.next({values:Q(n)}),A.state.next({...t,...l.keepDirty?{isDirty:oe()}:{}}),!l.keepIsValid&&Z()},te=({disabled:o,name:l})=>{(ge(o)&&i.mount||o||c.disabled.has(l))&&(o?c.disabled.add(l):c.disabled.delete(l))},Ae=(o,l={})=>{let d=g(r,o);const x=ge(l.disabled)||ge(e.disabled);return B(r,o,{...d||{},_f:{...d&&d._f?d._f:{ref:{name:o}},name:o,mount:!0,...l}}),c.mount.add(o),d?te({disabled:ge(l.disabled)?l.disabled:e.disabled,name:o}):ee(o,!0,l.value),{...x?{disabled:l.disabled||e.disabled}:{},...e.progressive?{required:!!l.required,min:it(l.min),max:it(l.max),minLength:it(l.minLength),maxLength:it(l.maxLength),pattern:it(l.pattern)}:{},name:o,onChange:ue,onBlur:ue,ref:p=>{if(p){Ae(o,l),d=g(r,o);const y=G(p.value)&&p.querySelectorAll&&p.querySelectorAll("input,select,textarea")[0]||p,C=Br(y),q=d._f.refs||[];if(C?q.find(Y=>Y===y):y===d._f.ref)return;B(r,o,{_f:{...d._f,...C?{refs:[...q.filter(Mt),y,...Array.isArray(g(a,o))?[{}]:[]],ref:{type:y.type,name:o}}:{ref:y}}}),ee(o,!1,void 0,y)}else d=g(r,o,{}),d._f&&(d._f.mount=!1),(e.shouldUnregister||l.shouldUnregister)&&!(Ys(c.array,o)&&i.action)&&c.unMount.add(o)}}},jt=()=>e.shouldFocusError&&He(r,Me,c.mount),ur=o=>{ge(o)&&(A.state.next({disabled:o}),He(r,(l,d)=>{const x=g(r,d);x&&(l.disabled=x._f.disabled||o,Array.isArray(x._f.refs)&&x._f.refs.forEach(p=>{p.disabled=x._f.disabled||o}))},0,!1))},cs=(o,l)=>async d=>{let x;d&&(d.preventDefault&&d.preventDefault(),d.persist&&d.persist());let p=Q(n);if(A.state.next({isSubmitting:!0}),e.resolver){const{errors:y,values:C}=await w();t.errors=y,p=Q(C)}else await R(r);if(c.disabled.size)for(const y of c.disabled)re(p,y);if(re(t.errors,"root"),fe(t.errors)){A.state.next({errors:{}});try{await o(p,d)}catch(y){x=y}}else l&&await l({...t.errors},d),jt(),setTimeout(jt);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fe(t.errors)&&!x,submitCount:t.submitCount+1,errors:t.errors}),x)throw x},fr=(o,l={})=>{g(r,o)&&(G(l.defaultValue)?ie(o,Q(g(a,o))):(ie(o,l.defaultValue),B(a,o,Q(l.defaultValue))),l.keepTouched||re(t.touchedFields,o),l.keepDirty||(re(t.dirtyFields,o),t.isDirty=l.defaultValue?oe(o,Q(g(a,o))):oe()),l.keepError||(re(t.errors,o),_.isValid&&Z()),A.state.next({...t}))},ls=(o,l={})=>{const d=o?Q(o):a,x=Q(d),p=fe(o),y=p?a:x;if(l.keepDefaultValues||(a=d),!l.keepValues){if(l.keepDirtyValues){const C=new Set([...c.mount,...Object.keys(nt(a,n))]);for(const q of Array.from(C))g(t.dirtyFields,q)?B(y,q,g(n,q)):ie(q,g(y,q))}else{if(rs&&G(o))for(const C of c.mount){const q=g(r,C);if(q&&q._f){const Y=Array.isArray(q._f.refs)?q._f.refs[0]:q._f.ref;if(pt(Y)){const _e=Y.closest("form");if(_e){_e.reset();break}}}}if(l.keepFieldsRef)for(const C of c.mount)ie(C,g(y,C));else r={}}n=e.shouldUnregister?l.keepDefaultValues?Q(a):{}:Q(y),A.array.next({values:{...y}}),A.state.next({values:{...y}})}c={mount:l.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!_.isValid||!!l.keepIsValid||!!l.keepDirtyValues,i.watch=!!e.shouldUnregister,A.state.next({submitCount:l.keepSubmitCount?t.submitCount:0,isDirty:p?!1:l.keepDirty?t.isDirty:!!(l.keepDefaultValues&&!Ee(o,a)),isSubmitted:l.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:p?{}:l.keepDirtyValues?l.keepDefaultValues&&n?nt(a,n):t.dirtyFields:l.keepDefaultValues&&o?nt(a,o):l.keepDirty?t.dirtyFields:{},touchedFields:l.keepTouched?t.touchedFields:{},errors:l.keepErrors?t.errors:{},isSubmitSuccessful:l.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ds=(o,l)=>ls(be(o)?o(n):o,l),hr=(o,l={})=>{const d=g(r,o),x=d&&d._f;if(x){const p=x.refs?x.refs[0]:x.ref;p.focus&&(p.focus(),l.shouldSelect&&be(p.select)&&p.select())}},mr=o=>{t={...t,...o}},us={control:{register:Ae,unregister:X,getFieldState:ft,handleSubmit:cs,setError:Xe,_subscribe:S,_runSchema:w,_focusError:jt,_getWatch:M,_getDirty:oe,_setValid:Z,_setFieldArray:ye,_setDisabledField:te,_setErrors:le,_getFieldArray:U,_reset:ls,_resetDefaultValues:()=>be(e.defaultValues)&&e.defaultValues().then(o=>{ds(o,e.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:de,_disableForm:ur,_subjects:A,_proxyFormState:_,get _fields(){return r},get _formValues(){return n},get _state(){return i},set _state(o){i=o},get _defaultValues(){return a},get _names(){return c},set _names(o){c=o},get _formState(){return t},get _options(){return e},set _options(o){e={...e,...o}}},subscribe:W,trigger:Ne,register:Ae,handleSubmit:cs,watch:j,setValue:ie,getValues:$e,reset:ds,resetField:fr,clearErrors:Ue,unregister:X,setError:Xe,setFocus:hr,getFieldState:ft};return{...us,formControl:us}}var je=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const s=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(Math.random()*16+s)%16|0;return(e=="x"?t:t&3|8).toString(16)})},Zt=(s,e,t={})=>t.shouldFocus||G(t.shouldFocus)?t.focusName||`${s}.${G(t.focusIndex)?e:t.focusIndex}.`:"",Pt=(s,e)=>[...s,...me(e)],Lt=s=>Array.isArray(s)?s.map(()=>{}):void 0;function $t(s,e,t){return[...s.slice(0,e),...me(t),...s.slice(e)]}var Ut=(s,e,t)=>Array.isArray(s)?(G(s[t])&&(s[t]=void 0),s.splice(t,0,s.splice(e,1)[0]),s):[],Bt=(s,e)=>[...me(e),...me(s)];function ta(s,e){let t=0;const r=[...s];for(const a of e)r.splice(a-t,1),t++;return Ct(r).length?r:[]}var zt=(s,e)=>G(e)?[]:ta(s,me(e).sort((t,r)=>t-r)),qt=(s,e,t)=>{[s[e],s[t]]=[s[t],s[e]]},As=(s,e,t)=>(s[e]=t,s);function sa(s){const e=Nt(),{control:t=e.control,name:r,keyName:a="id",shouldUnregister:n,rules:i}=s,[c,u]=T.useState(t._getFieldArray(r)),h=T.useRef(t._getFieldArray(r).map(je)),_=T.useRef(c),I=T.useRef(r),A=T.useRef(!1);I.current=r,_.current=c,t._names.array.add(r),i&&t.register(r,i),Vt(()=>t._subjects.array.subscribe({next:({values:N,name:w})=>{if(w===I.current||!w){const O=g(N,I.current);Array.isArray(O)&&(u(O),h.current=O.map(je))}}}).unsubscribe,[t]);const $=T.useCallback(N=>{A.current=!0,t._setFieldArray(r,N)},[t,r]),ce=(N,w)=>{const O=me(Q(N)),R=Pt(t._getFieldArray(r),O);t._names.focus=Zt(r,R.length-1,w),h.current=Pt(h.current,O.map(je)),$(R),u(R),t._setFieldArray(r,R,Pt,{argA:Lt(N)})},Z=(N,w)=>{const O=me(Q(N)),R=Bt(t._getFieldArray(r),O);t._names.focus=Zt(r,0,w),h.current=Bt(h.current,O.map(je)),$(R),u(R),t._setFieldArray(r,R,Bt,{argA:Lt(N)})},H=N=>{const w=zt(t._getFieldArray(r),N);h.current=zt(h.current,N),$(w),u(w),!Array.isArray(g(t._fields,r))&&B(t._fields,r,void 0),t._setFieldArray(r,w,zt,{argA:N})},ye=(N,w,O)=>{const R=me(Q(w)),de=$t(t._getFieldArray(r),N,R);t._names.focus=Zt(r,N,O),h.current=$t(h.current,N,R.map(je)),$(de),u(de),t._setFieldArray(r,de,$t,{argA:N,argB:Lt(w)})},V=(N,w)=>{const O=t._getFieldArray(r);qt(O,N,w),qt(h.current,N,w),$(O),u(O),t._setFieldArray(r,O,qt,{argA:N,argB:w},!1)},le=(N,w)=>{const O=t._getFieldArray(r);Ut(O,N,w),Ut(h.current,N,w),$(O),u(O),t._setFieldArray(r,O,Ut,{argA:N,argB:w},!1)},ee=(N,w)=>{const O=Q(w),R=As(t._getFieldArray(r),N,O);h.current=[...R].map((de,oe)=>!de||oe===N?je():h.current[oe]),$(R),u([...R]),t._setFieldArray(r,R,As,{argA:N,argB:O},!0,!1)},J=N=>{const w=me(Q(N));h.current=w.map(je),$([...w]),u([...w]),t._setFieldArray(r,[...w],O=>O,{},!0,!1)};return T.useEffect(()=>{if(t._state.action=!1,Qt(r,t._names)&&t._subjects.state.next({...t._formState}),A.current&&(!We(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!We(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([r]).then(N=>{const w=g(N.errors,r),O=g(t._formState.errors,r);(O?!w&&O.type||w&&(O.type!==w.type||O.message!==w.message):w&&w.type)&&(w?B(t._formState.errors,r,w):re(t._formState.errors,r),t._subjects.state.next({errors:t._formState.errors}))});else{const N=g(t._fields,r);N&&N._f&&!(We(t._options.reValidateMode).isOnSubmit&&We(t._options.mode).isOnSubmit)&&Gt(N,t._names.disabled,t._formValues,t._options.criteriaMode===ve.all,t._options.shouldUseNativeValidation,!0).then(w=>!fe(w)&&t._subjects.state.next({errors:ir(t._formState.errors,w,r)}))}t._subjects.state.next({name:r,values:Q(t._formValues)}),t._names.focus&&He(t._fields,(N,w)=>{if(t._names.focus&&w.startsWith(t._names.focus)&&N.focus)return N.focus(),1}),t._names.focus="",t._setValid(),A.current=!1},[c,r,t]),T.useEffect(()=>(!g(t._formValues,r)&&t._setFieldArray(r),()=>{const N=(w,O)=>{const R=g(t._fields,w);R&&R._f&&(R._f.mount=O)};t._options.shouldUnregister||n?t.unregister(r):N(r,!1)}),[r,t,a,n]),{swap:T.useCallback(V,[$,r,t]),move:T.useCallback(le,[$,r,t]),prepend:T.useCallback(Z,[$,r,t]),append:T.useCallback(ce,[$,r,t]),remove:T.useCallback(H,[$,r,t]),insert:T.useCallback(ye,[$,r,t]),update:T.useCallback(ee,[$,r,t]),replace:T.useCallback(J,[$,r,t]),fields:T.useMemo(()=>c.map((N,w)=>({...N,[a]:h.current[w]||je()})),[c,a])}}function ra(s={}){const e=T.useRef(void 0),t=T.useRef(void 0),[r,a]=T.useState({isDirty:!1,isValidating:!1,isLoading:be(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:be(s.defaultValues)?void 0:s.defaultValues});if(!e.current)if(s.formControl)e.current={...s.formControl,formState:r},s.defaultValues&&!be(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:i,...c}=ea(s);e.current={...c,formState:r}}const n=e.current.control;return n._options=s,Vt(()=>{const i=n._subscribe({formState:n._proxyFormState,callback:()=>a({...n._formState}),reRenderRoot:!0});return a(c=>({...c,isReady:!0})),n._formState.isReady=!0,i},[n]),T.useEffect(()=>n._disableForm(s.disabled),[n,s.disabled]),T.useEffect(()=>{s.mode&&(n._options.mode=s.mode),s.reValidateMode&&(n._options.reValidateMode=s.reValidateMode)},[n,s.mode,s.reValidateMode]),T.useEffect(()=>{s.errors&&(n._setErrors(s.errors),n._focusError())},[n,s.errors]),T.useEffect(()=>{s.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,s.shouldUnregister]),T.useEffect(()=>{if(n._proxyFormState.isDirty){const i=n._getDirty();i!==r.isDirty&&n._subjects.state.next({isDirty:i})}},[n,r.isDirty]),T.useEffect(()=>{s.values&&!Ee(s.values,t.current)?(n._reset(s.values,{keepFieldsRef:!0,...n._options.resetOptions}),t.current=s.values,a(i=>({...i}))):n._resetDefaultValues()},[n,s.values]),T.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),e.current.formState=Gs(r,n),e.current}const Ss=(s,e,t)=>{if(s&&"reportValidity"in s){const r=g(t,e);s.setCustomValidity(r&&r.message||""),s.reportValidity()}},or=(s,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?Ss(r.ref,t,s):r.refs&&r.refs.forEach(a=>Ss(a,t,s))}},aa=(s,e)=>{e.shouldUseNativeValidation&&or(s,e);const t={};for(const r in s){const a=g(e.fields,r),n=Object.assign(s[r]||{},{ref:a&&a.ref});if(na(e.names||Object.keys(s),r)){const i=Object.assign({},g(t,r));B(i,"root",n),B(t,r,i)}else B(t,r,n)}return t},na=(s,e)=>s.some(t=>t.startsWith(e+"."));var ia=function(s,e){for(var t={};s.length;){var r=s[0],a=r.code,n=r.message,i=r.path.join(".");if(!t[i])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];t[i]={message:c.message,type:c.code}}else t[i]={message:n,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(_){return _.errors.forEach(function(I){return s.push(I)})}),e){var u=t[i].types,h=u&&u[r.code];t[i]=Xs(i,e,t,a,h?[].concat(h,r.message):r.message)}s.shift()}return t},oa=function(s,e,t){return t===void 0&&(t={}),function(r,a,n){try{return Promise.resolve(function(i,c){try{var u=Promise.resolve(s[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(h){return n.shouldUseNativeValidation&&or({},n),{errors:{},values:t.raw?r:h}})}catch(h){return c(h)}return u&&u.then?u.then(void 0,c):u}(0,function(i){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(i))return{values:{},errors:aa(ia(i.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw i}))}catch(i){return Promise.reject(i)}}},L;(function(s){s.assertEqual=a=>{};function e(a){}s.assertIs=e;function t(a){throw new Error}s.assertNever=t,s.arrayToEnum=a=>{const n={};for(const i of a)n[i]=i;return n},s.getValidEnumValues=a=>{const n=s.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),i={};for(const c of n)i[c]=a[c];return s.objectValues(i)},s.objectValues=a=>s.objectKeys(a).map(function(n){return a[n]}),s.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const n=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&n.push(i);return n},s.find=(a,n)=>{for(const i of a)if(n(i))return i},s.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,n=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(n)}s.joinValues=r,s.jsonStringifyReplacer=(a,n)=>typeof n=="bigint"?n.toString():n})(L||(L={}));var Cs;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(Cs||(Cs={}));const b=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Te=s=>{switch(typeof s){case"undefined":return b.undefined;case"string":return b.string;case"number":return Number.isNaN(s)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":return Array.isArray(s)?b.array:s===null?b.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?b.promise:typeof Map<"u"&&s instanceof Map?b.map:typeof Set<"u"&&s instanceof Set?b.set:typeof Date<"u"&&s instanceof Date?b.date:b.object;default:return b.unknown}},m=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ce extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(n){return n.message},r={_errors:[]},a=n=>{for(const i of n.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let c=r,u=0;for(;u<i.path.length;){const h=i.path[u];u===i.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(i))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return a(this),r}static assert(e){if(!(e instanceof Ce))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const a of this.issues)if(a.path.length>0){const n=a.path[0];t[n]=t[n]||[],t[n].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ce.create=s=>new Ce(s);const Kt=(s,e)=>{let t;switch(s.code){case m.invalid_type:s.received===b.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case m.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,L.jsonStringifyReplacer)}`;break;case m.unrecognized_keys:t=`Unrecognized key(s) in object: ${L.joinValues(s.keys,", ")}`;break;case m.invalid_union:t="Invalid input";break;case m.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${L.joinValues(s.options)}`;break;case m.invalid_enum_value:t=`Invalid enum value. Expected ${L.joinValues(s.options)}, received '${s.received}'`;break;case m.invalid_arguments:t="Invalid function arguments";break;case m.invalid_return_type:t="Invalid function return type";break;case m.invalid_date:t="Invalid date";break;case m.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:L.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case m.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case m.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case m.custom:t="Invalid input";break;case m.invalid_intersection_types:t="Intersection results could not be merged";break;case m.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case m.not_finite:t="Number must be finite";break;default:t=e.defaultError,L.assertNever(s)}return{message:t}};let ca=Kt;function la(){return ca}const da=s=>{const{data:e,path:t,errorMaps:r,issueData:a}=s,n=[...t,...a.path||[]],i={...a,path:n};if(a.message!==void 0)return{...a,path:n,message:a.message};let c="";const u=r.filter(h=>!!h).slice().reverse();for(const h of u)c=h(i,{data:e,defaultError:c}).message;return{...a,path:n,message:c}};function v(s,e){const t=la(),r=da({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===Kt?void 0:Kt].filter(a=>!!a)});s.common.issues.push(r)}class pe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if(a.status==="aborted")return E;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const a of t){const n=await a.key,i=await a.value;r.push({key:n,value:i})}return pe.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:n,value:i}=a;if(n.status==="aborted"||i.status==="aborted")return E;n.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof i.value<"u"||a.alwaysSet)&&(r[n.value]=i.value)}return{status:e.value,value:r}}}const E=Object.freeze({status:"aborted"}),ct=s=>({status:"dirty",value:s}),xe=s=>({status:"valid",value:s}),Ns=s=>s.status==="aborted",Vs=s=>s.status==="dirty",Je=s=>s.status==="valid",xt=s=>typeof Promise<"u"&&s instanceof Promise;var k;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(k||(k={}));class Re{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const js=(s,e)=>{if(Je(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ce(s.common.issues);return this._error=t,this._error}}};function D(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:a}=s;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,c)=>{const{message:u}=s;return i.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??r??c.defaultError}:i.code!=="invalid_type"?{message:c.defaultError}:{message:u??t??c.defaultError}},description:a}}class P{get description(){return this._def.description}_getType(e){return Te(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Te(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pe,ctx:{common:e.parent.common,data:e.data,parsedType:Te(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(xt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Te(e)},a=this._parseSync({data:e,path:r.path,parent:r});return js(r,a)}"~validate"(e){var r,a;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Te(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return Je(n)?{value:n.value}:{issues:t.common.issues}}catch(n){(a=(r=n==null?void 0:n.message)==null?void 0:r.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(n=>Je(n)?{value:n.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Te(e)},a=this._parse({data:e,path:r.path,parent:r}),n=await(xt(a)?a:Promise.resolve(a));return js(r,n)}refine(e,t){const r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,n)=>{const i=e(a),c=()=>n.addIssue({code:m.custom,...r(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(c(),!1)):i?!0:(c(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new Ge({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Oe.create(this,this._def)}nullable(){return Ke.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return we.create(this)}promise(){return At.create(this,this._def)}or(e){return kt.create([this,e],this._def)}and(e){return wt.create(this,e,this._def)}transform(e){return new Ge({...D(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new es({...D(this._def),innerType:this,defaultValue:t,typeName:F.ZodDefault})}brand(){return new Oa({typeName:F.ZodBranded,type:this,...D(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ts({...D(this._def),innerType:this,catchValue:t,typeName:F.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return os.create(this,e)}readonly(){return ss.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ua=/^c[^\s-]{8,}$/i,fa=/^[0-9a-z]+$/,ha=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ma=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ya=/^[a-z0-9_-]{21}$/i,ga=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,pa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_a=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,va="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wt;const xa=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ba=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ka=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,wa=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Aa=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Sa=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ca=new RegExp(`^${cr}$`);function lr(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const t=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Na(s){return new RegExp(`^${lr(s)}$`)}function Va(s){let e=`${cr}T${lr(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ja(s,e){return!!((e==="v4"||!e)&&xa.test(s)||(e==="v6"||!e)&&ka.test(s))}function Ta(s,e){if(!ga.test(s))return!1;try{const[t]=s.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function Ea(s,e){return!!((e==="v4"||!e)&&ba.test(s)||(e==="v6"||!e)&&wa.test(s))}class Fe extends P{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==b.string){const n=this._getOrReturnCtx(e);return v(n,{code:m.invalid_type,expected:b.string,received:n.parsedType}),E}const r=new pe;let a;for(const n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:m.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="max")e.data.length>n.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:m.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="length"){const i=e.data.length>n.value,c=e.data.length<n.value;(i||c)&&(a=this._getOrReturnCtx(e,a),i?v(a,{code:m.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):c&&v(a,{code:m.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if(n.kind==="email")_a.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"email",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="emoji")Wt||(Wt=new RegExp(va,"u")),Wt.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"emoji",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="uuid")ma.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"uuid",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="nanoid")ya.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"nanoid",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid")ua.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cuid",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid2")fa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cuid2",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="ulid")ha.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"ulid",code:m.invalid_string,message:n.message}),r.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),v(a,{validation:"url",code:m.invalid_string,message:n.message}),r.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"regex",code:m.invalid_string,message:n.message}),r.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(a=this._getOrReturnCtx(e,a),v(a,{code:m.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(a=this._getOrReturnCtx(e,a),v(a,{code:m.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(a=this._getOrReturnCtx(e,a),v(a,{code:m.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty()):n.kind==="datetime"?Va(n).test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:m.invalid_string,validation:"datetime",message:n.message}),r.dirty()):n.kind==="date"?Ca.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:m.invalid_string,validation:"date",message:n.message}),r.dirty()):n.kind==="time"?Na(n).test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{code:m.invalid_string,validation:"time",message:n.message}),r.dirty()):n.kind==="duration"?pa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"duration",code:m.invalid_string,message:n.message}),r.dirty()):n.kind==="ip"?ja(e.data,n.version)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"ip",code:m.invalid_string,message:n.message}),r.dirty()):n.kind==="jwt"?Ta(e.data,n.alg)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"jwt",code:m.invalid_string,message:n.message}),r.dirty()):n.kind==="cidr"?Ea(e.data,n.version)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"cidr",code:m.invalid_string,message:n.message}),r.dirty()):n.kind==="base64"?Aa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"base64",code:m.invalid_string,message:n.message}),r.dirty()):n.kind==="base64url"?Sa.test(e.data)||(a=this._getOrReturnCtx(e,a),v(a,{validation:"base64url",code:m.invalid_string,message:n.message}),r.dirty()):L.assertNever(n);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(a=>e.test(a),{validation:t,code:m.invalid_string,...k.errToObj(r)})}_addCheck(e){return new Fe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...k.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...k.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...k.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...k.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...k.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...k.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...k.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...k.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...k.errToObj(t)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new Fe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Fe.create=s=>new Fe({checks:[],typeName:F.ZodString,coerce:(s==null?void 0:s.coerce)??!1,...D(s)});function Fa(s,e){const t=(s.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=t>r?t:r,n=Number.parseInt(s.toFixed(a).replace(".","")),i=Number.parseInt(e.toFixed(a).replace(".",""));return n%i/10**a}class Ye extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==b.number){const n=this._getOrReturnCtx(e);return v(n,{code:m.invalid_type,expected:b.number,received:n.parsedType}),E}let r;const a=new pe;for(const n of this._def.checks)n.kind==="int"?L.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),v(r,{code:m.invalid_type,expected:"integer",received:"float",message:n.message}),a.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:m.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),a.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:m.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),a.dirty()):n.kind==="multipleOf"?Fa(e.data,n.value)!==0&&(r=this._getOrReturnCtx(e,r),v(r,{code:m.not_multiple_of,multipleOf:n.value,message:n.message}),a.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),v(r,{code:m.not_finite,message:n.message}),a.dirty()):L.assertNever(n);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,r,a){return new Ye({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:k.toString(a)}]})}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&L.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ye.create=s=>new Ye({checks:[],typeName:F.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...D(s)});class lt extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==b.bigint)return this._getInvalidInput(e);let r;const a=new pe;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:m.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),a.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:m.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),a.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),v(r,{code:m.not_multiple_of,multipleOf:n.value,message:n.message}),a.dirty()):L.assertNever(n);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:b.bigint,received:t.parsedType}),E}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,r,a){return new lt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:k.toString(a)}]})}_addCheck(e){return new lt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}lt.create=s=>new lt({checks:[],typeName:F.ZodBigInt,coerce:(s==null?void 0:s.coerce)??!1,...D(s)});class Ts extends P{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==b.boolean){const r=this._getOrReturnCtx(e);return v(r,{code:m.invalid_type,expected:b.boolean,received:r.parsedType}),E}return xe(e.data)}}Ts.create=s=>new Ts({typeName:F.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...D(s)});class bt extends P{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==b.date){const n=this._getOrReturnCtx(e);return v(n,{code:m.invalid_type,expected:b.date,received:n.parsedType}),E}if(Number.isNaN(e.data.getTime())){const n=this._getOrReturnCtx(e);return v(n,{code:m.invalid_date}),E}const r=new pe;let a;for(const n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:m.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(a=this._getOrReturnCtx(e,a),v(a,{code:m.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):L.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new bt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}bt.create=s=>new bt({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:F.ZodDate,...D(s)});class Es extends P{_parse(e){if(this._getType(e)!==b.symbol){const r=this._getOrReturnCtx(e);return v(r,{code:m.invalid_type,expected:b.symbol,received:r.parsedType}),E}return xe(e.data)}}Es.create=s=>new Es({typeName:F.ZodSymbol,...D(s)});class Fs extends P{_parse(e){if(this._getType(e)!==b.undefined){const r=this._getOrReturnCtx(e);return v(r,{code:m.invalid_type,expected:b.undefined,received:r.parsedType}),E}return xe(e.data)}}Fs.create=s=>new Fs({typeName:F.ZodUndefined,...D(s)});class Os extends P{_parse(e){if(this._getType(e)!==b.null){const r=this._getOrReturnCtx(e);return v(r,{code:m.invalid_type,expected:b.null,received:r.parsedType}),E}return xe(e.data)}}Os.create=s=>new Os({typeName:F.ZodNull,...D(s)});class Rs extends P{constructor(){super(...arguments),this._any=!0}_parse(e){return xe(e.data)}}Rs.create=s=>new Rs({typeName:F.ZodAny,...D(s)});class Is extends P{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xe(e.data)}}Is.create=s=>new Is({typeName:F.ZodUnknown,...D(s)});class Ie extends P{_parse(e){const t=this._getOrReturnCtx(e);return v(t,{code:m.invalid_type,expected:b.never,received:t.parsedType}),E}}Ie.create=s=>new Ie({typeName:F.ZodNever,...D(s)});class Ds extends P{_parse(e){if(this._getType(e)!==b.undefined){const r=this._getOrReturnCtx(e);return v(r,{code:m.invalid_type,expected:b.void,received:r.parsedType}),E}return xe(e.data)}}Ds.create=s=>new Ds({typeName:F.ZodVoid,...D(s)});class we extends P{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==b.array)return v(t,{code:m.invalid_type,expected:b.array,received:t.parsedType}),E;if(a.exactLength!==null){const i=t.data.length>a.exactLength.value,c=t.data.length<a.exactLength.value;(i||c)&&(v(t,{code:i?m.too_big:m.too_small,minimum:c?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(v(t,{code:m.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(v(t,{code:m.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,c)=>a.type._parseAsync(new Re(t,i,t.path,c)))).then(i=>pe.mergeArray(r,i));const n=[...t.data].map((i,c)=>a.type._parseSync(new Re(t,i,t.path,c)));return pe.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new we({...this._def,minLength:{value:e,message:k.toString(t)}})}max(e,t){return new we({...this._def,maxLength:{value:e,message:k.toString(t)}})}length(e,t){return new we({...this._def,exactLength:{value:e,message:k.toString(t)}})}nonempty(e){return this.min(1,e)}}we.create=(s,e)=>new we({type:s,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...D(e)});function qe(s){if(s instanceof ne){const e={};for(const t in s.shape){const r=s.shape[t];e[t]=Oe.create(qe(r))}return new ne({...s._def,shape:()=>e})}else return s instanceof we?new we({...s._def,type:qe(s.element)}):s instanceof Oe?Oe.create(qe(s.unwrap())):s instanceof Ke?Ke.create(qe(s.unwrap())):s instanceof Le?Le.create(s.items.map(e=>qe(e))):s}class ne extends P{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=L.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==b.object){const h=this._getOrReturnCtx(e);return v(h,{code:m.invalid_type,expected:b.object,received:h.parsedType}),E}const{status:r,ctx:a}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ie&&this._def.unknownKeys==="strip"))for(const h in a.data)i.includes(h)||c.push(h);const u=[];for(const h of i){const _=n[h],I=a.data[h];u.push({key:{status:"valid",value:h},value:_._parse(new Re(a,I,a.path,h)),alwaysSet:h in a.data})}if(this._def.catchall instanceof Ie){const h=this._def.unknownKeys;if(h==="passthrough")for(const _ of c)u.push({key:{status:"valid",value:_},value:{status:"valid",value:a.data[_]}});else if(h==="strict")c.length>0&&(v(a,{code:m.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const _ of c){const I=a.data[_];u.push({key:{status:"valid",value:_},value:h._parse(new Re(a,I,a.path,_)),alwaysSet:_ in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const h=[];for(const _ of u){const I=await _.key,A=await _.value;h.push({key:I,value:A,alwaysSet:_.alwaysSet})}return h}).then(h=>pe.mergeObjectSync(r,h)):pe.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new ne({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var n,i;const a=((i=(n=this._def).errorMap)==null?void 0:i.call(n,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:k.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new ne({...this._def,unknownKeys:"strip"})}passthrough(){return new ne({...this._def,unknownKeys:"passthrough"})}extend(e){return new ne({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ne({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:F.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ne({...this._def,catchall:e})}pick(e){const t={};for(const r of L.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new ne({...this._def,shape:()=>t})}omit(e){const t={};for(const r of L.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new ne({...this._def,shape:()=>t})}deepPartial(){return qe(this)}partial(e){const t={};for(const r of L.objectKeys(this.shape)){const a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}return new ne({...this._def,shape:()=>t})}required(e){const t={};for(const r of L.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let n=this.shape[r];for(;n instanceof Oe;)n=n._def.innerType;t[r]=n}return new ne({...this._def,shape:()=>t})}keyof(){return dr(L.objectKeys(this.shape))}}ne.create=(s,e)=>new ne({shape:()=>s,unknownKeys:"strip",catchall:Ie.create(),typeName:F.ZodObject,...D(e)});ne.strictCreate=(s,e)=>new ne({shape:()=>s,unknownKeys:"strict",catchall:Ie.create(),typeName:F.ZodObject,...D(e)});ne.lazycreate=(s,e)=>new ne({shape:s,unknownKeys:"strip",catchall:Ie.create(),typeName:F.ZodObject,...D(e)});class kt extends P{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function a(n){for(const c of n)if(c.result.status==="valid")return c.result;for(const c of n)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const i=n.map(c=>new Ce(c.ctx.common.issues));return v(t,{code:m.invalid_union,unionErrors:i}),E}if(t.common.async)return Promise.all(r.map(async n=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await n._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(a);{let n;const i=[];for(const u of r){const h={...t,common:{...t.common,issues:[]},parent:null},_=u._parseSync({data:t.data,path:t.path,parent:h});if(_.status==="valid")return _;_.status==="dirty"&&!n&&(n={result:_,ctx:h}),h.common.issues.length&&i.push(h.common.issues)}if(n)return t.common.issues.push(...n.ctx.common.issues),n.result;const c=i.map(u=>new Ce(u));return v(t,{code:m.invalid_union,unionErrors:c}),E}}get options(){return this._def.options}}kt.create=(s,e)=>new kt({options:s,typeName:F.ZodUnion,...D(e)});function Xt(s,e){const t=Te(s),r=Te(e);if(s===e)return{valid:!0,data:s};if(t===b.object&&r===b.object){const a=L.objectKeys(e),n=L.objectKeys(s).filter(c=>a.indexOf(c)!==-1),i={...s,...e};for(const c of n){const u=Xt(s[c],e[c]);if(!u.valid)return{valid:!1};i[c]=u.data}return{valid:!0,data:i}}else if(t===b.array&&r===b.array){if(s.length!==e.length)return{valid:!1};const a=[];for(let n=0;n<s.length;n++){const i=s[n],c=e[n],u=Xt(i,c);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===b.date&&r===b.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class wt extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(n,i)=>{if(Ns(n)||Ns(i))return E;const c=Xt(n.value,i.value);return c.valid?((Vs(n)||Vs(i))&&t.dirty(),{status:t.value,value:c.data}):(v(r,{code:m.invalid_intersection_types}),E)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([n,i])=>a(n,i)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}wt.create=(s,e,t)=>new wt({left:s,right:e,typeName:F.ZodIntersection,...D(t)});class Le extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.array)return v(r,{code:m.invalid_type,expected:b.array,received:r.parsedType}),E;if(r.data.length<this._def.items.length)return v(r,{code:m.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),E;!this._def.rest&&r.data.length>this._def.items.length&&(v(r,{code:m.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map((i,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new Re(r,i,r.path,c)):null}).filter(i=>!!i);return r.common.async?Promise.all(n).then(i=>pe.mergeArray(t,i)):pe.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Le({...this._def,rest:e})}}Le.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Le({items:s,typeName:F.ZodTuple,rest:null,...D(e)})};class Ms extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.map)return v(r,{code:m.invalid_type,expected:b.map,received:r.parsedType}),E;const a=this._def.keyType,n=this._def.valueType,i=[...r.data.entries()].map(([c,u],h)=>({key:a._parse(new Re(r,c,r.path,[h,"key"])),value:n._parse(new Re(r,u,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of i){const h=await u.key,_=await u.value;if(h.status==="aborted"||_.status==="aborted")return E;(h.status==="dirty"||_.status==="dirty")&&t.dirty(),c.set(h.value,_.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const u of i){const h=u.key,_=u.value;if(h.status==="aborted"||_.status==="aborted")return E;(h.status==="dirty"||_.status==="dirty")&&t.dirty(),c.set(h.value,_.value)}return{status:t.value,value:c}}}}Ms.create=(s,e,t)=>new Ms({valueType:e,keyType:s,typeName:F.ZodMap,...D(t)});class dt extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.set)return v(r,{code:m.invalid_type,expected:b.set,received:r.parsedType}),E;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(v(r,{code:m.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(v(r,{code:m.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const n=this._def.valueType;function i(u){const h=new Set;for(const _ of u){if(_.status==="aborted")return E;_.status==="dirty"&&t.dirty(),h.add(_.value)}return{status:t.value,value:h}}const c=[...r.data.values()].map((u,h)=>n._parse(new Re(r,u,r.path,h)));return r.common.async?Promise.all(c).then(u=>i(u)):i(c)}min(e,t){return new dt({...this._def,minSize:{value:e,message:k.toString(t)}})}max(e,t){return new dt({...this._def,maxSize:{value:e,message:k.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}dt.create=(s,e)=>new dt({valueType:s,minSize:null,maxSize:null,typeName:F.ZodSet,...D(e)});class Zs extends P{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Zs.create=(s,e)=>new Zs({getter:s,typeName:F.ZodLazy,...D(e)});class Ps extends P{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:m.invalid_literal,expected:this._def.value}),E}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ps.create=(s,e)=>new Ps({value:s,typeName:F.ZodLiteral,...D(e)});function dr(s,e){return new Qe({values:s,typeName:F.ZodEnum,...D(e)})}class Qe extends P{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return v(t,{expected:L.joinValues(r),received:t.parsedType,code:m.invalid_type}),E}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return v(t,{received:t.data,code:m.invalid_enum_value,options:r}),E}return xe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qe.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Qe.create=dr;class Ls extends P{_parse(e){const t=L.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==b.string&&r.parsedType!==b.number){const a=L.objectValues(t);return v(r,{expected:L.joinValues(a),received:r.parsedType,code:m.invalid_type}),E}if(this._cache||(this._cache=new Set(L.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=L.objectValues(t);return v(r,{received:r.data,code:m.invalid_enum_value,options:a}),E}return xe(e.data)}get enum(){return this._def.values}}Ls.create=(s,e)=>new Ls({values:s,typeName:F.ZodNativeEnum,...D(e)});class At extends P{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==b.promise&&t.common.async===!1)return v(t,{code:m.invalid_type,expected:b.promise,received:t.parsedType}),E;const r=t.parsedType===b.promise?t.data:Promise.resolve(t.data);return xe(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}At.create=(s,e)=>new At({type:s,typeName:F.ZodPromise,...D(e)});class Ge extends P{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:i=>{v(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),a.type==="preprocess"){const i=a.transform(r.data,n);if(r.common.async)return Promise.resolve(i).then(async c=>{if(t.value==="aborted")return E;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?E:u.status==="dirty"||t.value==="dirty"?ct(u.value):u});{if(t.value==="aborted")return E;const c=this._def.schema._parseSync({data:i,path:r.path,parent:r});return c.status==="aborted"?E:c.status==="dirty"||t.value==="dirty"?ct(c.value):c}}if(a.type==="refinement"){const i=c=>{const u=a.refinement(c,n);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?E:(c.status==="dirty"&&t.dirty(),i(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?E:(c.status==="dirty"&&t.dirty(),i(c.value).then(()=>({status:t.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Je(i))return E;const c=a.transform(i.value,n);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>Je(i)?Promise.resolve(a.transform(i.value,n)).then(c=>({status:t.value,value:c})):E);L.assertNever(a)}}Ge.create=(s,e,t)=>new Ge({schema:s,typeName:F.ZodEffects,effect:e,...D(t)});Ge.createWithPreprocess=(s,e,t)=>new Ge({schema:e,effect:{type:"preprocess",transform:s},typeName:F.ZodEffects,...D(t)});class Oe extends P{_parse(e){return this._getType(e)===b.undefined?xe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Oe.create=(s,e)=>new Oe({innerType:s,typeName:F.ZodOptional,...D(e)});class Ke extends P{_parse(e){return this._getType(e)===b.null?xe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ke.create=(s,e)=>new Ke({innerType:s,typeName:F.ZodNullable,...D(e)});class es extends P{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===b.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}es.create=(s,e)=>new es({innerType:s,typeName:F.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...D(e)});class ts extends P{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xt(a)?a.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ce(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ce(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ts.create=(s,e)=>new ts({innerType:s,typeName:F.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...D(e)});class $s extends P{_parse(e){if(this._getType(e)!==b.nan){const r=this._getOrReturnCtx(e);return v(r,{code:m.invalid_type,expected:b.nan,received:r.parsedType}),E}return{status:"valid",value:e.data}}}$s.create=s=>new $s({typeName:F.ZodNaN,...D(s)});class Oa extends P{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class os extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?E:n.status==="dirty"?(t.dirty(),ct(n.value)):this._def.out._parseAsync({data:n.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?E:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,t){return new os({in:e,out:t,typeName:F.ZodPipeline})}}class ss extends P{_parse(e){const t=this._def.innerType._parse(e),r=a=>(Je(a)&&(a.value=Object.freeze(a.value)),a);return xt(t)?t.then(a=>r(a)):r(t)}unwrap(){return this._def.innerType}}ss.create=(s,e)=>new ss({innerType:s,typeName:F.ZodReadonly,...D(e)});var F;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(F||(F={}));const Ht=Fe.create,Us=Ye.create;Ie.create;const Ra=we.create,Bs=ne.create;kt.create;wt.create;Le.create;const zs=Qe.create;At.create;Oe.create;Ke.create;const Jt=s=>Math.round(s*100),Ze=s=>s/100,Ia=(s,e)=>s+e,qs=(s,e)=>Math.round(s*e),Ws=(s,e)=>s<e?s:e,Da=Bs({phone:Ht().min(10,"Phone number must be at least 10 digits"),discount:Us().min(0).optional(),discountType:zs(["percentage","amount"]).optional(),paymentMethod:zs(["cash","card","upi","other"]),items:Ra(Bs({category:Ht().min(1,"Please select a category"),item:Ht().min(1,"Please select an item"),quantity:Us().min(1,"Quantity must be at least 1")})).min(1,"At least one item is required")}),Xa=()=>{var Xe;const s=_r(),[e,t]=se.useState([]),[r,a]=se.useState(!1),[n,i]=se.useState(""),[c,u]=se.useState([]),[h,_]=se.useState(!1),I=se.useRef(null),A=se.useRef(-1),$=se.useRef(null),ce=se.useRef(0),{control:Z,register:H,handleSubmit:ye,setValue:V,getValues:le,formState:{errors:ee}}=ra({resolver:oa(Da),defaultValues:{items:[{item:"",quantity:1}],paymentMethod:"cash",discount:0,discountType:"percentage"},mode:"onChange"}),{fields:J,append:N,remove:w}=sa({control:Z,name:"items"}),O=ot({control:Z,name:"items"}),R=ot({control:Z,name:"discountType"})??"percentage",de=ot({control:Z,name:"discount"})??0,oe=ot({control:Z,name:"phone"})??"";se.useEffect(()=>{let j=!0;return(async()=>{try{const S=await kr({activeOnly:!0});if(!j)return;(S==null?void 0:S.status)===1&&Array.isArray(S.items)?t(S.items):t([])}catch(S){console.error("Error fetching items:",S)}})(),()=>{j=!1}},[]),se.useEffect(()=>{i(oe??"")},[oe]),se.useEffect(()=>{if(((n==null?void 0:n.length)??0)<3){u([]),_(!1);return}return $.current&&window.clearTimeout($.current),$.current=window.setTimeout(async()=>{const j=++ce.current;try{const S=await xr(n);if(j!==ce.current)return;(S==null?void 0:S.status)===1&&Array.isArray(S.data)?(u(S.data),_(!0)):(u([]),_(!1))}catch(S){console.error("phone search error",S),u([]),_(!1)}},300),()=>{$.current&&window.clearTimeout($.current)}},[n]),se.useEffect(()=>{const j=S=>{if(!(!h||c.length===0))if(S.key==="ArrowDown")S.preventDefault(),A.current=Math.min(A.current+1,c.length-1),M();else if(S.key==="ArrowUp")S.preventDefault(),A.current=Math.max(A.current-1,0),M();else if(S.key==="Enter"){if(A.current>=0&&A.current<c.length){const W=c[A.current];U(W.phone)}}else S.key==="Escape"&&_(!1)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[h,c]);const M=()=>{const j=I.current;if(!j)return;const S=A.current,W=j.querySelectorAll("[data-suggestion-index]")[S];W&&W.scrollIntoView({block:"nearest"})},U=j=>{V("phone",j,{shouldValidate:!0,shouldDirty:!0}),_(!1),A.current=-1},z=se.useMemo(()=>O.reduce((j,S)=>{const W=e.find(Ae=>Ae._id===S.item);if(!W)return j;const X=Jt(Number(W.price)),te=Number(S.quantity)||0;return Ia(j,qs(X,te))},0),[O,e]),[K,ie]=se.useState("0");se.useEffect(()=>{ie("0"),V("discount",0)},[R]),se.useEffect(()=>{if(K===""||K===void 0){V("discount",0,{shouldDirty:!0});return}if(R==="percentage"){const j=Math.max(0,Number(K)||0),S=Math.min(j,100),W=Ws(Math.round(z*S/100),z);V("discount",W,{shouldDirty:!0})}else{const j=Math.max(0,Number(K)||0),S=Jt(j),W=Ws(S,z);V("discount",W,{shouldDirty:!0})}},[K,z,R]);const ue=de??0,Me=Math.max(0,z-ue),Ne=se.useCallback(()=>{N({category:"",item:"",quantity:1})},[N]),$e=se.useCallback(j=>{J.length<=1||w(j)},[w,J.length]),ft=async j=>{if(!j.items.some(S=>!S.item)){a(!0);try{const S={phone:j.phone,items:j.items.map(X=>({item:X.item,quantity:Number(X.quantity)})),discount:Ze(j.discount??0),paymentMethod:j.paymentMethod},W=await br(S);(W==null?void 0:W.status)===1?s("/bill-preview",{state:{billData:W.data}}):console.error("create bill failed",W)}catch(S){console.error("error creating bill",S)}finally{a(!1)}}},Ue=j=>{switch(j){case"cash":return f.jsx(Ar,{className:"h-4 w-4"});case"card":return f.jsx(Cr,{className:"h-4 w-4"});case"upi":return f.jsx(Zr,{className:"h-4 w-4"});default:return f.jsx(Tr,{className:"h-4 w-4"})}};return f.jsx("div",{children:f.jsxs("form",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",onSubmit:ye(ft),children:[f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs(tt,{children:[f.jsx(st,{children:f.jsxs(rt,{className:"flex items-center gap-2",children:[f.jsx(ys,{className:"h-5 w-5 text-primary"})," Customer"]})}),f.jsx(at,{children:f.jsxs("div",{className:"relative",children:[f.jsx(Ft,{...H("phone"),placeholder:"Enter phone number",inputMode:"tel",autoComplete:"off",value:oe,className:"pl-10","aria-autocomplete":"list","aria-controls":"phone-suggestions","aria-expanded":h,onChange:j=>{V("phone",j.target.value,{shouldDirty:!0,shouldValidate:!0}),i(j.target.value)}}),f.jsx(ys,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),ee.phone&&f.jsx("p",{className:"text-sm text-destructive mt-1",children:ee.phone.message}),h&&c.length>0&&f.jsx("div",{ref:I,id:"phone-suggestions",className:"absolute z-50 mt-2 max-h-48 w-full overflow-auto rounded-md border bg-white shadow-lg",role:"listbox",children:c.map((j,S)=>f.jsx("div",{"data-suggestion-index":S,role:"option","aria-selected":S===A.current,className:`cursor-pointer px-3 py-2 ${S===A.current?"bg-gray-100":"hover:bg-gray-50"}`,onMouseDown:W=>{W.preventDefault(),U(j.phone)},children:f.jsx("div",{className:"flex justify-between items-center",children:f.jsx("div",{className:"text-sm font-medium",children:j.phone})})},j._id))})]})})]}),f.jsxs(tt,{children:[f.jsx(st,{children:f.jsx(rt,{className:"text-lg font-semibold",children:"Items"})}),f.jsxs(at,{className:"space-y-4",children:[J.map((j,S)=>{const W=Array.from(new Map(e.map(X=>[X.category._id,X.category])).values());return f.jsxs("div",{className:"grid grid-cols-12 items-center gap-3",children:[f.jsx("div",{className:"col-span-3",children:f.jsx(mt,{control:Z,name:`items.${S}.category`,render:({field:X})=>f.jsxs(Ot,{value:X.value||"",onValueChange:te=>{X.onChange(te),V(`items.${S}.item`,"")},children:[f.jsx(Rt,{className:"w-full",children:f.jsx(It,{placeholder:"Category"})}),f.jsx(Dt,{children:W.map(te=>f.jsx(Be,{value:te._id,children:te.name},te._id))})]})})}),f.jsx("div",{className:"col-span-6",children:f.jsx(mt,{control:Z,name:`items.${S}.item`,render:({field:X})=>f.jsxs(Ot,{value:X.value||"",disabled:!le(`items.${S}.category`),onValueChange:X.onChange,children:[f.jsx(Rt,{className:"w-full",children:f.jsx(It,{placeholder:"Item"})}),f.jsx(Dt,{children:e.filter(te=>te.category._id===le(`items.${S}.category`)).map(te=>f.jsx(Be,{value:te._id,children:f.jsxs("div",{className:"flex justify-between items-center gap-3",children:[f.jsx("span",{children:te.name}),f.jsxs(vr,{variant:"default",children:["₹",Number(te.price).toFixed(2)]})]})},te._id))})]})})}),f.jsx("div",{className:"col-span-2",children:f.jsx(mt,{control:Z,name:`items.${S}.quantity`,render:({field:X})=>f.jsx(Ft,{type:"number",min:1,max:30,placeholder:"Qty",inputMode:"numeric",pattern:"[0-9]*",className:"text-center",...X,onChange:te=>{const Ae=Math.max(1,Math.min(30,Number(te.target.value)||1));X.onChange(Ae)}})})}),f.jsx("div",{className:"col-span-1 flex justify-center",children:f.jsx(et,{type:"button",variant:"default",size:"xs",disabled:J.length===1,className:"rounded-full",onClick:()=>$e(S),children:f.jsx(Fr,{className:"h-4 w-4"})})})]},j.id)}),ee.items&&f.jsx("p",{className:"text-sm text-destructive",children:(Xe=ee.items)==null?void 0:Xe.message}),f.jsxs(et,{type:"button",variant:"solid",size:"sm",className:"flex justify-end gap-2 items-center",onClick:()=>Ne(),children:[f.jsx(Dr,{className:"h-5 w-5 mr-2"}),"Add Item"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs(tt,{children:[f.jsx(st,{children:f.jsx(rt,{className:"text-lg",children:"Discount"})}),f.jsxs(at,{className:"space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(et,{type:"button",variant:R==="percentage"?"default":"solid",size:"sm",onClick:()=>V("discountType","percentage"),children:[f.jsx(Rr,{className:"h-4 w-4 mr-1"})," %"]}),f.jsxs(et,{type:"button",variant:R==="amount"?"default":"solid",size:"sm",onClick:()=>V("discountType","amount"),children:[f.jsx(Vr,{className:"h-4 w-4 mr-1"})," ₹"]})]}),f.jsx(Ft,{type:"number",placeholder:R==="percentage"?"Enter %":"Enter amount (₹)",value:K,min:0,max:R==="percentage"?100:void 0,onChange:j=>{ie(j.target.value)}}),f.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.jsxs("div",{children:["Subtotal: ₹",Ze(z).toFixed(2)]}),f.jsxs("div",{children:["Calculated discount: ₹",Ze(ue).toFixed(2)]})]})]})]}),f.jsxs(tt,{children:[f.jsx(st,{children:f.jsx(rt,{className:"text-lg",children:"Payment Method"})}),f.jsx(at,{children:f.jsx(mt,{control:Z,name:"paymentMethod",render:({field:j})=>f.jsxs(Ot,{value:j.value,onValueChange:j.onChange,children:[f.jsx(Rt,{children:f.jsx(It,{placeholder:"Select Payment Method"})}),f.jsxs(Dt,{children:[f.jsx(Be,{value:"cash",children:f.jsxs("div",{className:"flex items-center gap-2",children:[Ue("cash")," Cash"]})}),f.jsx(Be,{value:"card",children:f.jsxs("div",{className:"flex items-center gap-2",children:[Ue("card")," Card"]})}),f.jsx(Be,{value:"upi",children:f.jsxs("div",{className:"flex items-center gap-2",children:[Ue("upi")," UPI"]})}),f.jsx(Be,{value:"other",children:f.jsxs("div",{className:"flex items-center gap-2",children:[Ue("other")," Other"]})})]})]})})})]})]})]}),f.jsx("div",{className:"space-y-6",children:f.jsxs(tt,{className:"sticky top-6",children:[f.jsx(st,{children:f.jsx(rt,{children:"Bill Summary"})}),f.jsxs(at,{className:"space-y-4",children:[f.jsx("div",{className:"space-y-3",children:O.map((j,S)=>{const W=e.find(Ae=>Ae._id===j.item);if(!W)return null;const X=Jt(Number(W.price)),te=qs(X,Number(j.quantity)||0);return f.jsxs("div",{className:"flex justify-between items-center text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:W.name}),f.jsxs("span",{className:"text-muted-foreground ml-1",children:["×",j.quantity]})]}),f.jsxs("span",{className:"font-medium",children:["₹",Ze(te).toFixed(2)]})]},S)})}),f.jsx(ms,{}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Subtotal:"}),f.jsxs("span",{children:["₹",Ze(z).toFixed(2)]})]}),ue>0&&f.jsxs("div",{className:"flex justify-between text-success",children:[f.jsx("span",{children:"Discount:"}),f.jsxs("span",{children:["-₹",Ze(ue).toFixed(2)]})]}),f.jsx(ms,{}),f.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[f.jsx("span",{children:"Total:"}),f.jsxs("span",{children:["₹",Ze(Me).toFixed(2)]})]})]}),f.jsx(et,{type:"submit",className:"w-full",disabled:r||O.some(j=>!j.item),children:r?"Creating bill...":"Create Bill"})]})]})})]})})};export{Xa as default};
