import{Q as m,r as n,j as e,T as u,E as f,A as p,U as g}from"./index-CB9FBUrv.js";import{C as r,b as l,c as a,a as i}from"./card-C2t8kd3D.js";import{S,a as b,b as y,c as N,d as v}from"./select-D3GJjIu1.js";import"https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";import"./utils-Dk9uDfko.js";import"./index-DIZsMau0.js";import"./floating-ui.react-dom-CqzLph7T.js";import"./createLucideIcon-BhX0PSqU.js";async function C(s){return m.fetchDataWithAxios({url:"/report/dashboard",method:"get",params:s})}const A=["daily","weekly","monthly"],w=()=>{const[s,d]=n.useState(null),[x,o]=n.useState(!1),[c,h]=n.useState("daily"),j=async()=>{o(!0);try{const t=await C({period:c});t.status===1&&t.data&&d(t.data)}catch(t){console.error(t)}finally{o(!1)}};return n.useEffect(()=>{j()},[c]),x||!s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(u,{loading:!0})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between w-full mb-6",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Dashboard"}),e.jsxs(S,{value:c,onValueChange:t=>h(t),children:[e.jsx(b,{className:"w-40",children:e.jsx(y,{placeholder:"Select Period"})}),e.jsx(N,{children:A.map(t=>e.jsx(v,{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(a,{children:"Total Bills"})}),e.jsx(i,{children:e.jsx("p",{className:"text-3xl font-bold",children:s.totalBills})})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(a,{children:"Total Amount"})}),e.jsx(i,{children:e.jsxs("p",{className:"text-3xl font-bold",children:["â‚¹",s.totalAmount.toFixed(2)]})})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(a,{children:"Average Discount"})}),e.jsx(i,{children:e.jsxs("p",{className:"text-3xl font-bold",children:[s.avgDiscount,"%"]})})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(a,{children:"Most Active Segment"})}),e.jsx(i,{children:e.jsx("p",{className:"text-xl font-medium",children:s.mostActiveSegment})})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(a,{children:"Recurring Customers"})}),e.jsx(i,{children:e.jsx("p",{className:"text-3xl font-bold",children:s.recurringCustomers})})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(a,{children:"New Customers"})}),e.jsx(i,{children:e.jsx("p",{className:"text-3xl font-bold",children:s.newCustomers})})]})]})]})},D=()=>e.jsx("div",{children:e.jsx("h1",{children:"Home"})}),P=()=>{const{user:s}=f();return n.useEffect(()=>{},[]),`${s==null?void 0:s.authority}`===p?e.jsx(w,{}):`${s==null?void 0:s.authority}`===g?e.jsx(D,{}):e.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:e.jsx("p",{children:"No dashboard available for your role."})})};export{P as default};
